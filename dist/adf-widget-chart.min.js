!function(e,t){"use strict";angular.module("adf.widget.chart",["adf.provider","angular-c3"]).config(["dashboardProvider",function(e){e.widget("chart",{title:"Chart C3",description:"Displays chart from JSON",templateUrl:"{widgetsPath}/chart/src/view.html",controller:"chartCtrl",edit:{templateUrl:"{widgetsPath}/chart/src/edit.html"},resolve:{feed:["jsonChartService","config",function(e,t){return t.url?e.get(t.url):void 0}]}}).widget("drupalchart",{title:"Chart Drupal",description:"Displays chart from JSON",templateUrl:"{widgetsPath}/chart/src/view.html",controller:"chartCtrl",edit:{templateUrl:"{widgetsPath}/chart/src/edit.html"},resolve:{feed:["jsonDrupalService","config",function(e,t){return t.url?e.get(t.url):void 0}]}})}]).controller("chartCtrl",["$scope","feed","config",function(e,t,o){if(t){var r="#90A4AE",l=t[Math.floor(t.length/2)].trend-t[Math.floor(t.length/2)-1].trend;switch((l>o.trendtolerance||!o.trendtolerance)&&(r=l>0&&!o.trendinverse||0>l&&o.trendinverse?"#8BC34A":"#F44336"),o.type){case"bar":e.config={data:{json:t,type:o.type,keys:{x:"name",value:["value"]}},axis:{x:{type:"category",tick:{outer:!1}},y:{tick:{outer:!1}},rotated:o.rotated},color:{pattern:["#90A4AE","#ECEFF1","#263238"]}};break;default:e.config={data:{json:t,type:o.type,keys:{x:"name",value:["trend","value"]},colors:{trend:r}},axis:{y:{tick:{count:5,format:d3.format(".3n"),outer:!1}},x:{tick:{outer:!1}}},color:{pattern:["#ECEFF1","#90A4AE","#263238"]},padding:{top:8}}}o.timeseries&&(e.config.axis.x.type="timeseries",e.config.axis.x.tick.format=d3.time.format("%d %b %y"),e.config.axis.x.tick.count=6),e.config.size={height:o.height?o.height:"240"},e.config.legend={show:o.showLegend?o.showLegend:!1},e.config.tooltip={show:o.showTooltip?o.showTooltip:!1}}}]).controller("chartCustomCtrl",["$scope","feed","config",function(e,t,o){t&&(e.config.code=o.code)}]),angular.module("adf.widget.chart").run(["$templateCache",function(e){e.put("{widgetsPath}/chart/src/edit-custom.html",'<form role=form><div class=form-group><label for=url>Data source URL</label> <input type=url class=form-control id=url ng-model=config.url placeholder="Enter data source url"> <label for=code>Code</label> <textarea class=form-control id=code ng-model=config.code placeholder="Enter D3 code here"></textarea></div></form>'),e.put("{widgetsPath}/chart/src/edit.html",'<form role=form><div class=form-group><label for=url>Data source URL</label> <input type=url class=form-control id=url ng-model=config.url placeholder="Enter data source url"> <label for=type>Type</label> <input type=text class=form-control id=type ng-model=config.type placeholder="spline, line, bar, pie, ..."> <label for=height>Height</label> <input type=text class=form-control id=height ng-model=config.height placeholder="Enter height (e.g. 320)"> <label for=showLegend>showLegend</label> <input type=checkbox class=form-control ng-model=config.showLegend name=showLegend value=showLegend> <label for=showTooltip>showTooltip</label> <input type=checkbox class=form-control ng-model=config.showTooltip name=showTooltip value=showTooltip> <label for=timeseries>Time series</label> <input type=checkbox class=form-control ng-model=config.timeseries name=timeseries value=timeseries> <label for=rotated>Rotated by 90 degrees</label> <input type=checkbox class=form-control ng-model=config.rotated name=rotated value=rotated> <label for=trendtolerance>Tolerance (For trend line only)</label> <input type=text class=form-control ng-model=config.trendtolerance name=trendtolerance value=trendtolerance> <label for=trendinverse>Inverse (For trend line only)</label> <input type=checkbox class=form-control ng-model=config.trendinverse name=trendinverse value=trendinverse></div></form>'),e.put("{widgetsPath}/chart/src/view-custom.html",'<div class=news><div class="alert alert-info" ng-if=!config>Please insert a valid JSON URI in the widget configuration.</div><div ng-if=config><div id=chartd3-{{$id}}></div></div></div>'),e.put("{widgetsPath}/chart/src/view.html",'<div class=news><div class="alert alert-info" ng-if=!config>Please insert a valid JSON URI in the widget configuration.</div><div ng-if=config><c3-chart id=chart-{{$id}} config=config></c3-chart></div></div>')}])}(window);